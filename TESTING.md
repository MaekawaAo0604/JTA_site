# 動作確認手順

## 事前準備

### 1. Firebase プロジェクト設定

1. [Firebase Console](https://console.firebase.google.com/) でプロジェクト作成
2. Firestore Database を有効化
3. サービスアカウントキーを取得

### 2. 環境変数設定

```bash
cp .env.local.example .env.local
```

`.env.local` に以下を設定：

- Firebase Admin SDK の認証情報
- Firebase Client SDK の設定

### 3. 依存関係インストール

```bash
npm install
```

## 動作確認項目

### ✅ Phase 1-4: 基本レイアウト

**確認項目:**

- [ ] ヘッダーが表示される
- [ ] フッターが表示される
- [ ] ナビゲーションリンクが機能する
- [ ] ローディング・エラー画面が表示される

**確認コマンド:**

```bash
npm run dev
# http://localhost:3000 にアクセス
```

---

### ✅ Phase 5: トップページ

**確認項目:**

- [ ] 標語「クセは個性、個性は文化。」が表示される
- [ ] 会員数が表示される（Firebase 未設定時は 0）
- [ ] 天パ予報マップエリアが表示される
- [ ] お知らせ 3 件が表示される
- [ ] 入会試験 CTA ボタンが機能する

**確認 URL:**

- http://localhost:3000/

**注意点:**

- Firebase 未設定の場合、会員数は 0 と表示されます
- 予報マップ画像は `/public/forecast/latest.png` に配置が必要です

---

### ✅ Phase 6: 協会についてページ

**確認項目:**

- [ ] ミッション文が表示される
- [ ] ビジョン・活動内容が表示される
- [ ] 組織体制（3 名）が表示される
- [ ] 倫理規定（5 条）が表示される

**確認 URL:**

- http://localhost:3000/about

---

### ✅ Phase 7: 入会試験ページ

**確認項目:**

- [ ] 10 問の質問が表示される
- [ ] 回答選択が機能する
- [ ] 回答済みカウンターが更新される
- [ ] 全問回答前は送信ボタンが無効
- [ ] 全問回答後に送信ボタンが有効化
- [ ] 送信後に `/join/result` へ遷移

**確認 URL:**

- http://localhost:3000/join

**テスト手順:**

1. 各質問の選択肢をクリック
2. 回答済みカウンターが増えることを確認
3. 10 問すべて回答
4. 送信ボタンをクリック
5. 結果ページへ遷移することを確認

---

### ✅ Phase 8: 結果ページと会員登録

**確認項目:**

- [ ] 合格メッセージが表示される
- [ ] 会員登録フォームが表示される
- [ ] バリデーションが機能する:
  - メール形式チェック
  - 年齢範囲チェック（13-120）
  - 必須項目チェック
- [ ] エラーメッセージが表示される
- [ ] 送信中ローディングが表示される
- [ ] 登録成功後に会員証ボタンが表示される

**確認 URL:**

- http://localhost:3000/join/result

**テスト手順:**

#### ❌ バリデーションエラー確認

1. メール欄に不正な形式を入力 → エラー表示
2. 年齢に 12 を入力 → エラー表示
3. 年齢に 121 を入力 → エラー表示
4. 必須項目未入力で送信 → エラー表示

#### ✅ 正常登録確認（Firebase 設定済みの場合）

1. 有効なメールアドレスを入力
2. 年齢: 25
3. 性別を選択
4. 髪質を選択
5. プライバシーポリシーに同意
6. 送信ボタンクリック
7. 登録完了メッセージと会員番号が表示される
8. 会員証発行ボタンが表示される

**Firebase 未設定の場合:**

- エラーメッセージが表示されますが、フロントエンドのバリデーションは確認できます

---

### ✅ Phase 9: 会員証発行ページ

**確認項目:**

- [ ] Canvas で会員証が生成される
- [ ] 免許証風デザインが表示される
- [ ] 会員情報が表示される:
  - 氏名
  - 会員番号（JCHA-XXXXXX）
  - 発行日
  - 髪質
  - 有効期限「全ての髪型が祝福される日まで」
- [ ] ダウンロードボタンが機能する
- [ ] PNG 画像がダウンロードされる

**確認 URL:**

- http://localhost:3000/member-card

**テスト手順:**

1. ページロード時に Canvas が自動生成される
2. 会員証のデザインを確認
3. ダウンロードボタンをクリック
4. PNG 画像がダウンロードされることを確認
5. ダウンロードした画像を開いて内容を確認

**現在の動作:**

- モックデータで会員証を生成
- 実際の会員データ連携は今後実装予定

---

## レスポンシブデザイン確認

**確認サイズ:**

- [ ] モバイル: 375px
- [ ] タブレット: 768px
- [ ] デスクトップ: 1280px

**確認項目:**

- [ ] レイアウトが崩れない
- [ ] ナビゲーションが機能する
- [ ] ボタンがタップ可能
- [ ] テキストが読みやすい

---

## ビルド確認

```bash
npm run build
```

**確認項目:**

- [ ] ビルドエラーがない
- [ ] 型エラーがない
- [ ] 静的ページ生成が成功

---

## 既知の制限事項

### Firebase 未設定時

- 会員数: 0 と表示
- 会員登録: エラーメッセージ表示
- 会員証: モックデータで生成

### 画像ファイル

- 予報マップ: `/public/forecast/latest.png` の配置が必要
- エンブレム画像: プレースホルダー使用中

### TODO

- [ ] Firestore との実データ連携
- [ ] 会員証生成時の実会員データ取得
- [ ] 予報マップ自動生成機能
- [ ] お問い合わせフォーム送信機能

---

## トラブルシューティング

### ビルドエラー

```bash
rm -rf .next node_modules
npm install
npm run build
```

### 開発サーバーが起動しない

```bash
# ポート3000が使用中の場合
lsof -ti:3000 | xargs kill -9
npm run dev
```

### Firebase 接続エラー

- `.env.local` の設定を確認
- Firebase Console でプロジェクト設定を確認
- サービスアカウントキーの権限を確認
